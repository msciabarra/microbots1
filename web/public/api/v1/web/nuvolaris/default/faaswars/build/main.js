var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function a(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function c(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function h(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function f(){return d("")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function w(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function v(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function x(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let _;function k(t){_=t}function E(){if(!_)throw new Error("Function called outside component initialization");return _}const q=[],O=[],A=[],S=[],$=Promise.resolve();let C=!1;function T(t){A.push(t)}let R=!1;const M=new Set;function I(){if(!R){R=!0;do{for(let t=0;t<q.length;t+=1){const e=q[t];k(e),F(e.$$)}for(k(null),q.length=0;O.length;)O.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];M.has(e)||(M.add(e),e())}A.length=0}while(q.length);for(;S.length;)S.pop()();C=!1,R=!1,M.clear()}}function F(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const j=new Set;let z;function B(t,e){t&&t.i&&(j.delete(t),t.i(e))}function P(t,e,n,o){if(t&&t.o){if(j.has(t))return;j.add(t),z.c.push((()=>{j.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function N(t){t&&t.c()}function L(t,n,r){const{fragment:s,on_mount:a,on_destroy:l,after_update:u}=t.$$;s&&s.m(n,r),T((()=>{const n=a.map(e).filter(i);l?l.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(T)}function D(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function U(t,e){-1===t.$$.dirty[0]&&(q.push(t),C||(C=!0,$.then(I)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(e,i,r,s,a,l,c=[-1]){const h=_;k(e);const d=i.props||{},p=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let f=!1;if(p.ctx=r?r(e,d,((t,n,...o)=>{const i=o.length?o[0]:n;return p.ctx&&a(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),f&&U(e,t)),n})):[],p.update(),f=!0,o(p.before_update),p.fragment=!!s&&s(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(u)}else p.fragment&&p.fragment.c();i.intro&&B(e.$$.fragment),L(e,i.target,i.anchor),I()}k(h)}class J{$destroy(){D(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function G(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}G('/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */\n\n/* Document\n   ========================================================================== */\n\n/**\n * 1. Correct the line height in all browsers.\n * 2. Prevent adjustments of font size after orientation changes in iOS.\n */\n\nhtml {\n  line-height: 1.15; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n}\n\n/* Sections\n   ========================================================================== */\n\n/**\n * Remove the margin in all browsers.\n */\n\nbody {\n  margin: 0;\n}\n\n/**\n * Render the `main` element consistently in IE.\n */\n\nmain {\n  display: block;\n}\n\n/**\n * Correct the font size and margin on `h1` elements within `section` and\n * `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n/* Grouping content\n   ========================================================================== */\n\n/**\n * 1. Add the correct box sizing in Firefox.\n * 2. Show the overflow in Edge and IE.\n */\n\nhr {\n  box-sizing: content-box; /* 1 */\n  height: 0; /* 1 */\n  overflow: visible; /* 2 */\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\npre {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/* Text-level semantics\n   ========================================================================== */\n\n/**\n * Remove the gray background on active links in IE 10.\n */\n\na {\n  background-color: transparent;\n}\n\n/**\n * 1. Remove the bottom border in Chrome 57-\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\n */\n\nabbr[title] {\n  border-bottom: none; /* 1 */\n  text-decoration: underline; /* 2 */\n  text-decoration: underline dotted; /* 2 */\n}\n\n/**\n * Add the correct font weight in Chrome, Edge, and Safari.\n */\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\n * Add the correct font size in all browsers.\n */\n\nsmall {\n  font-size: 80%;\n}\n\n/**\n * Prevent `sub` and `sup` elements from affecting the line height in\n * all browsers.\n */\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/* Embedded content\n   ========================================================================== */\n\n/**\n * Remove the border on images inside links in IE 10.\n */\n\nimg {\n  border-style: none;\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change the font styles in all browsers.\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\n * Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\n[type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Correct the padding in Firefox.\n */\n\nfieldset {\n  padding: 0.35em 0.75em 0.625em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box; /* 1 */\n  color: inherit; /* 2 */\n  display: table; /* 1 */\n  max-width: 100%; /* 1 */\n  padding: 0; /* 3 */\n  white-space: normal; /* 1 */\n}\n\n/**\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\n * Remove the default vertical scrollbar in IE 10+.\n */\n\ntextarea {\n  overflow: auto;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10.\n * 2. Remove the padding in IE 10.\n */\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type="search"] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding in Chrome and Safari on macOS.\n */\n\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/* Interactive\n   ========================================================================== */\n\n/*\n * Add the correct display in Edge, IE 10+, and Firefox.\n */\n\ndetails {\n  display: block;\n}\n\n/*\n * Add the correct display in all browsers.\n */\n\nsummary {\n  display: list-item;\n}\n\n/* Misc\n   ========================================================================== */\n\n/**\n * Add the correct display in IE 10+.\n */\n\ntemplate {\n  display: none;\n}\n\n/**\n * Add the correct display in IE 10.\n */\n\n[hidden] {\n  display: none;\n}\n');G("*,*:after,*:before{box-sizing:inherit}html{box-sizing:border-box;font-size:62.5%}body{color:#606c76;font-family:'Roboto', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;font-size:1.6em;font-weight:300;letter-spacing:.01em;line-height:1.6}blockquote{border-left:0.3rem solid #d1d1d1;margin-left:0;margin-right:0;padding:1rem 1.5rem}blockquote *:last-child{margin-bottom:0}.button,button,input[type='button'],input[type='reset'],input[type='submit']{background-color:#9b4dca;border:0.1rem solid #9b4dca;border-radius:.4rem;color:#fff;cursor:pointer;display:inline-block;font-size:1.1rem;font-weight:700;height:3.8rem;letter-spacing:.1rem;line-height:3.8rem;padding:0 3.0rem;text-align:center;text-decoration:none;text-transform:uppercase;white-space:nowrap}.button:focus,.button:hover,button:focus,button:hover,input[type='button']:focus,input[type='button']:hover,input[type='reset']:focus,input[type='reset']:hover,input[type='submit']:focus,input[type='submit']:hover{background-color:#606c76;border-color:#606c76;color:#fff;outline:0}.button[disabled],button[disabled],input[type='button'][disabled],input[type='reset'][disabled],input[type='submit'][disabled]{cursor:default;opacity:.5}.button[disabled]:focus,.button[disabled]:hover,button[disabled]:focus,button[disabled]:hover,input[type='button'][disabled]:focus,input[type='button'][disabled]:hover,input[type='reset'][disabled]:focus,input[type='reset'][disabled]:hover,input[type='submit'][disabled]:focus,input[type='submit'][disabled]:hover{background-color:#9b4dca;border-color:#9b4dca}.button.button-outline,button.button-outline,input[type='button'].button-outline,input[type='reset'].button-outline,input[type='submit'].button-outline{background-color:transparent;color:#9b4dca}.button.button-outline:focus,.button.button-outline:hover,button.button-outline:focus,button.button-outline:hover,input[type='button'].button-outline:focus,input[type='button'].button-outline:hover,input[type='reset'].button-outline:focus,input[type='reset'].button-outline:hover,input[type='submit'].button-outline:focus,input[type='submit'].button-outline:hover{background-color:transparent;border-color:#606c76;color:#606c76}.button.button-outline[disabled]:focus,.button.button-outline[disabled]:hover,button.button-outline[disabled]:focus,button.button-outline[disabled]:hover,input[type='button'].button-outline[disabled]:focus,input[type='button'].button-outline[disabled]:hover,input[type='reset'].button-outline[disabled]:focus,input[type='reset'].button-outline[disabled]:hover,input[type='submit'].button-outline[disabled]:focus,input[type='submit'].button-outline[disabled]:hover{border-color:inherit;color:#9b4dca}.button.button-clear,button.button-clear,input[type='button'].button-clear,input[type='reset'].button-clear,input[type='submit'].button-clear{background-color:transparent;border-color:transparent;color:#9b4dca}.button.button-clear:focus,.button.button-clear:hover,button.button-clear:focus,button.button-clear:hover,input[type='button'].button-clear:focus,input[type='button'].button-clear:hover,input[type='reset'].button-clear:focus,input[type='reset'].button-clear:hover,input[type='submit'].button-clear:focus,input[type='submit'].button-clear:hover{background-color:transparent;border-color:transparent;color:#606c76}.button.button-clear[disabled]:focus,.button.button-clear[disabled]:hover,button.button-clear[disabled]:focus,button.button-clear[disabled]:hover,input[type='button'].button-clear[disabled]:focus,input[type='button'].button-clear[disabled]:hover,input[type='reset'].button-clear[disabled]:focus,input[type='reset'].button-clear[disabled]:hover,input[type='submit'].button-clear[disabled]:focus,input[type='submit'].button-clear[disabled]:hover{color:#9b4dca}code{background:#f4f5f6;border-radius:.4rem;font-size:86%;margin:0 .2rem;padding:.2rem .5rem;white-space:nowrap}pre{background:#f4f5f6;border-left:0.3rem solid #9b4dca;overflow-y:hidden}pre>code{border-radius:0;display:block;padding:1rem 1.5rem;white-space:pre}hr{border:0;border-top:0.1rem solid #f4f5f6;margin:3.0rem 0}input[type='color'],input[type='date'],input[type='datetime'],input[type='datetime-local'],input[type='email'],input[type='month'],input[type='number'],input[type='password'],input[type='search'],input[type='tel'],input[type='text'],input[type='url'],input[type='week'],input:not([type]),textarea,select{-webkit-appearance:none;background-color:transparent;border:0.1rem solid #d1d1d1;border-radius:.4rem;box-shadow:none;box-sizing:inherit;height:3.8rem;padding:.6rem 1.0rem .7rem;width:100%}input[type='color']:focus,input[type='date']:focus,input[type='datetime']:focus,input[type='datetime-local']:focus,input[type='email']:focus,input[type='month']:focus,input[type='number']:focus,input[type='password']:focus,input[type='search']:focus,input[type='tel']:focus,input[type='text']:focus,input[type='url']:focus,input[type='week']:focus,input:not([type]):focus,textarea:focus,select:focus{border-color:#9b4dca;outline:0}select{background:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 8\" width=\"30\"><path fill=\"%23d1d1d1\" d=\"M0,0l6,8l6-8\"/></svg>') center right no-repeat;padding-right:3.0rem}select:focus{background-image:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 8\" width=\"30\"><path fill=\"%239b4dca\" d=\"M0,0l6,8l6-8\"/></svg>')}select[multiple]{background:none;height:auto}textarea{min-height:6.5rem}label,legend{display:block;font-size:1.6rem;font-weight:700;margin-bottom:.5rem}fieldset{border-width:0;padding:0}input[type='checkbox'],input[type='radio']{display:inline}.label-inline{display:inline-block;font-weight:normal;margin-left:.5rem}.container{margin:0 auto;max-width:112.0rem;padding:0 2.0rem;position:relative;width:100%}.row{display:flex;flex-direction:column;padding:0;width:100%}.row.row-no-padding{padding:0}.row.row-no-padding>.column{padding:0}.row.row-wrap{flex-wrap:wrap}.row.row-top{align-items:flex-start}.row.row-bottom{align-items:flex-end}.row.row-center{align-items:center}.row.row-stretch{align-items:stretch}.row.row-baseline{align-items:baseline}.row .column{display:block;flex:1 1 auto;margin-left:0;max-width:100%;width:100%}.row .column.column-offset-10{margin-left:10%}.row .column.column-offset-20{margin-left:20%}.row .column.column-offset-25{margin-left:25%}.row .column.column-offset-33,.row .column.column-offset-34{margin-left:33.3333%}.row .column.column-offset-40{margin-left:40%}.row .column.column-offset-50{margin-left:50%}.row .column.column-offset-60{margin-left:60%}.row .column.column-offset-66,.row .column.column-offset-67{margin-left:66.6666%}.row .column.column-offset-75{margin-left:75%}.row .column.column-offset-80{margin-left:80%}.row .column.column-offset-90{margin-left:90%}.row .column.column-10{flex:0 0 10%;max-width:10%}.row .column.column-20{flex:0 0 20%;max-width:20%}.row .column.column-25{flex:0 0 25%;max-width:25%}.row .column.column-33,.row .column.column-34{flex:0 0 33.3333%;max-width:33.3333%}.row .column.column-40{flex:0 0 40%;max-width:40%}.row .column.column-50{flex:0 0 50%;max-width:50%}.row .column.column-60{flex:0 0 60%;max-width:60%}.row .column.column-66,.row .column.column-67{flex:0 0 66.6666%;max-width:66.6666%}.row .column.column-75{flex:0 0 75%;max-width:75%}.row .column.column-80{flex:0 0 80%;max-width:80%}.row .column.column-90{flex:0 0 90%;max-width:90%}.row .column .column-top{align-self:flex-start}.row .column .column-bottom{align-self:flex-end}.row .column .column-center{align-self:center}@media (min-width: 40rem){.row{flex-direction:row;margin-left:-1.0rem;width:calc(100% + 2.0rem)}.row .column{margin-bottom:inherit;padding:0 1.0rem}}a{color:#9b4dca;text-decoration:none}a:focus,a:hover{color:#606c76}dl,ol,ul{list-style:none;margin-top:0;padding-left:0}dl dl,dl ol,dl ul,ol dl,ol ol,ol ul,ul dl,ul ol,ul ul{font-size:90%;margin:1.5rem 0 1.5rem 3.0rem}ol{list-style:decimal inside}ul{list-style:circle inside}.button,button,dd,dt,li{margin-bottom:1.0rem}fieldset,input,select,textarea{margin-bottom:1.5rem}blockquote,dl,figure,form,ol,p,pre,table,ul{margin-bottom:2.5rem}table{border-spacing:0;display:block;overflow-x:auto;text-align:left;width:100%}td,th{border-bottom:0.1rem solid #e1e1e1;padding:1.2rem 1.5rem}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}@media (min-width: 40rem){table{display:table;overflow-x:initial}}b,strong{font-weight:bold}p{margin-top:0}h1,h2,h3,h4,h5,h6{font-weight:300;letter-spacing:-.1rem;margin-bottom:2.0rem;margin-top:0}h1{font-size:4.6rem;line-height:1.2}h2{font-size:3.6rem;line-height:1.25}h3{font-size:2.8rem;line-height:1.3}h4{font-size:2.2rem;letter-spacing:-.08rem;line-height:1.35}h5{font-size:1.8rem;letter-spacing:-.05rem;line-height:1.5}h6{font-size:1.6rem;letter-spacing:0;line-height:1.4}img{max-width:100%}.clearfix:after{clear:both;content:' ';display:table}.float-left{float:left}.float-right{float:right}");G('button {\n  background-color: #194577;\n  border: 0.1rem solid #0c78c3;\n  color: #eadb0b;\n}\n\n.flag {\n  padding: 2px;\n}\n\n.flag-border {\n  padding: 1px;\n  border: 1px solid red;\n}\n\n@font-face {\n  font-family: "Star Jedi Outline";\n  src: url("/api/v1/web/nuvolaris/default/faaswars/font/StarJediOutline.woff2") format("woff2"),\n    url("/api/v1/web/nuvolaris/default/faaswars/font/StarJediOutline.woff") format("woff");\n  font-weight: normal;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: "Noto Sans";\n  src: url("/api/v1/web/nuvolaris/default/faaswars/font/NotoSans.woff2") format("woff2"),\n    url("/api/v1/web/nuvolaris/default/faaswars/font/NotoSans.woff") format("woff");\n  font-weight: normal;\n  font-style: normal;\n  font-display: swap;\n}\n\nh1 {\n  font-family: "Star Jedi Outline";\n  color: darkorange;\n}\n\nh2,\nh3,\nh4 {\n  font-family: "Noto Sans";\n  color: darkorange;\n}\n\na {\n  color:orangered;\n}\n\ncanvas {\n  padding: 0;\n  margin: auto;\n  display: block;\n  width: 100%;\n}\n\n@media screen and (min-width: 600px) {\n  .container {\n    padding: 0 2px;\n  }\n\n  .row .column.column-offset {\n    margin-left: 0%;\n  }\n\n  .center {\n    margin: 0;\n  }\n\n  div.center {\n    margin-left: 0;\n  }\n\n  canvas {\n    margin: 0;\n  }\n  h1,\n  a,\n  h3,\n  h4 {\n    text-align: left;\n    margin-left: 0;\n    margin-right: 0;\n  }\n  .row .column.column-left {\n    flex: 0 0 25%;\n    max-width: 50%;\n  }\n  .row .column.column-right {\n    flex: 0 0 25%;\n    max-width: 50%;\n  }\n  .row .column.column-center {\n    flex: 0 0 50%;\n    max-width: 50%;\n  }\n}\n\n@media screen and (min-width: 800px) {\n  .row .column.column-offset {\n    margin-left: 25%;\n  }\n  .center {\n    margin: auto;\n  }\n  div.center {\n    margin-left: auto;\n    margin-right: auto;\n  }\n  canvas {\n    padding: 0;\n    margin: auto;\n    display: block;\n    width: 500px;\n    height: 500px;\n  }\n  h1,\n  a,\n  h3,\n  h4 {\n    text-align: center;\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n  .row .column.column-left {\n    flex: 0 0 25%;\n    max-width: 25%;\n  }\n\n  .row .column.column-right {\n    flex: 0 0 25%;\n    max-width: 25%;\n  }\n\n  .row .column.column-center {\n    flex: 0 0 50%;\n    max-width: 50%;\n  }\n}\n');var V="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Y,W,X=(function(t,e){var n="undefined"!=typeof self?self:V,o=function(){function t(){this.fetch=!1,this.DOMException=n.DOMException}return t.prototype=n,new t}();!function(t){!function(e){var n="URLSearchParams"in t,o="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,s="ArrayBuffer"in t;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function h(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return o&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function m(t){var e=new FileReader,n=f(e);return e.readAsArrayBuffer(t),n}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&i&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t,e,n,o=p(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=f(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),o=0;o<e.length;o++)n[o]=String.fromCharCode(e[o]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=u(t),e=c(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},d.prototype.delete=function(t){delete this.map[u(t)]},d.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},d.prototype.set=function(t,e){this.map[u(t)]=c(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),h(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),h(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),h(t)},o&&(d.prototype[Symbol.iterator]=d.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(t,e){var n,o,i=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=e.method||this.method||"GET",o=n.toUpperCase(),y.indexOf(o)>-1?o:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function v(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),o=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(i))}})),e}function x(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];x.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function k(t,n){return new Promise((function(o,r){var s=new w(t,n);if(s.signal&&s.signal.aborted)return r(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function l(){a.abort()}a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),o=n.shift().trim();if(o){var i=n.join(":").trim();e.append(o,i)}})),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;o(new x(i,n))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.onabort=function(){r(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",l),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",l)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}k.polyfill=!0,t.fetch||(t.fetch=k,t.Headers=d,t.Request=w,t.Response=x),e.Headers=d,e.Request=w,e.Response=x,e.fetch=k,Object.defineProperty(e,"__esModule",{value:!0})}({})}(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var i=o;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e}(W={path:Y,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&W.path)}},W.exports),W.exports);class K{constructor(t,e,n){this.ext2kind={go:"go:1.17",js:"nodejs:14",py:"python:3"},this.base=t+"/api/v1/namespaces/_/",this.auth="Basic "+btoa(e),this.namespace=n}async authGet(t){let e={method:"GET",headers:{Authorization:this.auth}};return await X(t,e).then((t=>t.ok?t.text():"ERROR")).catch((t=>"ERROR"))}async call(t,e){let n=t.split(":"),o=this.base+n.pop(),i={method:0==n.length?"GET":n[0],headers:{"Content-Type":"application/json",Authorization:this.auth}};return e&&(i.body=JSON.stringify(e)),await X(o,i).then((t=>t.ok?t.json():{error:t.statusText,code:t.status})).catch((t=>({error:t,code:"999"})))}async list(){let t=[],e=await this.call("actions");for(let n of e)for(let e of n.annotations)"nimbot"==e.key&&t.push(n.name+"."+e.value);return t}async load(t){let e=t.split(".")[0],n=await this.call("actions/"+e+"?code=true");return"error"in n?n.error:n.exec.code}async del(t){let e=t.split(".")[0];return await this.call("DELETE:actions/"+e)}async save(t,e,n){let[o,i]=t.split("."),r="PUT:actions/"+o+(n?"?overwrite=true":"");return await this.call(r,{namespace:"_",name:o,publish:!0,exec:{kind:this.ext2kind[i],binary:!1,code:e},annotations:[{key:"nimbot",value:i},{key:"web-export",value:!0}]})}}const Q="https://apigcp.nimbella.io/api/v1/web/";function Z(t){return t*(Math.PI/180)}function tt(t,e,n,o){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-o,2))}function et(t,e,n,o,i,r){return n+i>t&&t>n&&o+r>e&&e>o}let nt=new class{constructor(){this.requestOn=!1,this.actionOn=!1,this.eventOn=!1,this.statesOn=!1,this.stateInterval=1,this.hitOn=!1}state(t,e,n){this.statesOn&&t%this.stateInterval==0&&console.log(t,e,n)}hit(t,e){this.hitOn&&console.log("*** hit",t,e)}request(...t){this.requestOn&&console.log("request:",...t)}action(...t){this.actionOn&&console.log("action:",...t)}event(...t){this.eventOn&&console.log("event:",...t)}};class ot{constructor(t,e,n,o,i,r){this.data={},this.id=0,this.hp=0,this.hp_total=0,this.tank_angle=0,this.turret_angle=0,this.radar_angle=0,this.event_counter=0,this.events=[],this.bullets=[],this.status={wall_collide:!1,is_hit:!1},this.is_hit=!1,this.is_yell=!1,this.is_spot=!1,this.yell_ts=0,this.yell_msg="",this.bullet_ts=0,this.enemy_spot={},this.action_to_collide=0,this.waiting_for_response=!1,this.just_spotted=!1,this.enemies=[],this.inspect=function(){},this.actions=["move_forwards","move_backwards","move_opposide","turn_left","turn_right","turn_turret_left","turn_turret_right","yell","shoot","data"],this.x=t,this.y=e,this.url=n,this.completed_request=i,this.hit_robot=r,this.name=n.split("/").pop(),this.hp_total=5+o,this.hp=this.hp_total}init(t,e,n){this.enemies=t,this.turret_angle=n,this.tank_angle=e}move(t){nt.action(this.id,"move",t);let e=this.x+t*Math.cos(Z(this.tank_angle)),n=this.y+t*Math.sin(Z(this.tank_angle));et(e,n,15,15,ot.battlefield_width-15,ot.battlefield_height-15)?(this.status.wall_collide=!1,this.x=e,this.y=n):this.status.wall_collide=!0}turn(t){nt.action(this.id,"turn",t),this.tank_angle+=t,this.tank_angle=this.tank_angle%360,this.tank_angle<0&&(this.tank_angle+=360)}turn_turret(t){nt.action(this.id,"turn_turret",t),this.turret_angle+=t,this.turret_angle=this.turret_angle%360,this.turret_angle<0&&(this.turret_angle+=360)}yell(t){nt.action(this.id,"yell",t),this.is_yell=!0,this.yell_ts=0,this.yell_msg=t}async send(t){let e=JSON.stringify(t,null,2);return++this.event_counter,this.inspect(this.id,this.event_counter,e,void 0),nt.event(this.id,JSON.stringify(t)),this.waiting_for_response=!0,X(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:e}).then((t=>{if(t.ok)return t.text();throw"Broken Robot Controller"})).then((t=>{this.waiting_for_response=!1;let e=[];for(let n of this.decode(t))n.progress=0,nt.request(this.id,n),e.push(n);return this.events=e,this.completed_request("Round completed.",!0),!0})).catch((t=>(this.waiting_for_response=!1,console.log(t),this.completed_request("ERROR: "+t,!1),!1)))}async send_event(t){return this.send({event:t,energy:this.hp,x:Math.floor(this.me.x),y:Math.floor(this.me.y),angle:Math.floor(this.me.angle),tank_angle:Math.floor(this.me.tank_angle),turret_angle:Math.floor(this.me.turret_angle),enemy_spot:this.enemy_spot,data:this.data})}check_enemy_spot(){this.enemy_spot={};let t=!1;for(let e of this.enemies){let n=(this.tank_angle+this.turret_angle)%360;n=n<0?360+n:n;let o=Z(n),i=Math.atan2(e.y-this.y,e.x-this.x),r=tt(this.x,this.y,e.x,e.y),s=Math.atan2(5,r);o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI);let a=i+s;if(o>=i-s&&o<=a){let n=i*(180/Math.PI);n<0&&(n=360+n),this.enemy_spot={id:e.id,x:Math.floor(e.x),y:Math.floor(e.y),angle:Math.floor(n),distance:Math.floor(r),energy:e.hp},t=!0}}return!!t}update_bullet(){let t=-1;for(let e of this.bullets){if(t++,e.x+=3*Math.cos(Z(e.direction)),e.y+=3*Math.sin(Z(e.direction)),!et(e.x,e.y,2,2,ot.battlefield_width-2,ot.battlefield_height-2)){e=null,this.bullets.splice(t,1);continue}let n=-1;for(let t of this.enemies){if(n++,tt(e.x,e.y,t.x,t.y)<20){t.hp-=1,t.is_hit=!0,this.hit_robot(t.x,t.y),e=null,this.bullets.splice(n,1),nt.hit(t.id,t.state());break}}}}state(){if(this.me){let t=this.me;return`${t.id}: e=${Math.floor(t.hp)} x=${Math.floor(t.x)} y=${Math.floor(t.y)} angle=${Math.floor(t.angle)} tank=${Math.floor(t.tank_angle)} turret=${Math.floor(t.turret_angle)}`}return""}async update(){this.me={angle:(this.tank_angle+this.turret_angle)%360,tank_angle:this.tank_angle,turret_angle:this.turret_angle,id:this.id,x:this.x,y:this.y,hp:this.hp},this.bullet_ts==Number.MAX_VALUE?this.bullet_ts=0:this.bullet_ts++,this.bullets.length>0&&this.update_bullet();let t=!1;for(let e of this.events)switch(e.action){case"shoot":if(this.bullets.length>=5||this.bullet_ts<50)continue;e.progress=1,this.bullet_ts=0;let n={x:this.x,y:this.y,direction:this.tank_angle+this.turret_angle};this.bullets.push(n);continue;case"data":this.data=e.data,e.progress=1;continue;case"yell":0==this.yell_ts&&this.yell(e.msg),e.progress=1;continue;case"turn_turret_left":t||(e.progress++,this.turn_turret(-1),t=!0);continue;case"turn_turret_right":t||(e.progress++,this.turn_turret(1),t=!0);continue}let e=[],n=!1;for(let t of this.events)if(t.progress<t.amount&&(e.push(t),!n))switch(t.action){case"move_forwards":t.progress++,this.move(1),this.status.wall_collide&&(this.action_to_collide=1),n=!0;break;case"move_backwards":t.progress++,this.move(-1),this.status.wall_collide&&(this.action_to_collide=-1),n=!0;break;case"move_opposide":t.progress++,this.move(-this.action_to_collide),this.status.wall_collide&&(this.action_to_collide=-this.action_to_collide),n=!0;break;case"turn_left":t.progress++,this.turn(-1),n=!0;break;case"turn_right":t.progress++,this.turn(1),n=!0}if(this.events=e,!this.is_spot&&this.check_enemy_spot()&&(this.is_spot=!0),!this.waiting_for_response){if(this.is_spot&&!this.just_spotted)return this.is_spot=!1,this.just_spotted=!0,this.send_event("enemy-spot");if(this.is_hit)return this.status.is_hit=!0,this.events=[],this.send_event("hit").then((t=>(this.is_hit=!1,this.just_spotted=!1,t)));if(this.status.wall_collide)return this.events=[],this.send_event("wall-collide").then((t=>(this.just_spotted=!1,t)));if(0==this.events.length)return this.send_event("idle").then((t=>(this.just_spotted=!1,t)))}return!0}checkEvent(t){for(let e in t)if(-1==this.actions.indexOf(e))return"ERROR! '"+e+"' ???";return""}decode(t){let e,n=JSON.parse(t);this.inspect(this.id,this.event_counter,void 0,JSON.stringify(n,null,2));let o=[];e="object"==typeof n?Array.isArray(n)?n:[n]:[];for(let t of e){if("action"in t){o.push(t);continue}let e=this.checkEvent(t);""!=e&&(o.push({action:"yell",msg:e,amount:1}),console.log(e)),"data"in t&&o.push({action:"data",data:t.data,amount:1}),"yell"in t&&o.push({action:"yell",msg:t.yell,amount:1}),"shoot"in t&&t.shoot&&o.push({action:"shoot",amount:1}),"turn_turret_right"in t?o.push({action:"turn_turret_right",amount:t.turn_turret_right}):"turn_turret_left"in t&&o.push({action:"turn_turret_left",amount:t.turn_turret_left}),"move_opposide"in t?o.push({action:"move_opposide",amount:t.move_opposide}):"move_forwards"in t?(o.push({action:"move_forwards",amount:t.move_forwards}),delete t.move_forwards):"move_backwards"in t?(o.push({action:"move_backwards",amount:t.move_backwards}),delete t.move_backwards):"turn_left"in t?(o.push({action:"turn_left",amount:t.turn_left}),delete t.turn_left):"turn_right"in t&&o.push({action:"turn_right",amount:t.turn_right})}return o}}ot.battlefield_width=0,ot.battlefield_height=0;class it{constructor(t,e,n,o){this.suspended=!0,this.tracing=!0,this.timeout=0,this.duration=-1,this.title="",ot.battlefield_height=e,ot.battlefield_width=t,this.width=t,this.height=e,this.end_battle=n,this.suspend_battle=o,it.battle=this}init(t,e,n,o){this.duration=n,this.title=t[0].split("/").pop()+" vs "+t[1].split("/").pop();let i=this.height/2,r=this.width/3,s=r,a=0;it.robots=[];for(let e of t){let t=new ot(s,i,e,o[a],((t,e)=>{this.completed_request(t,e)}),((t,e)=>{this.hit_robot(t,e)}));t.id=a++,it.robots.push(t),s+=r,a>=2&&(s=Math.random()*(this.width-100+20))}let l=0;for(let t of it.robots){let n=[];for(let e of it.robots)e.id!=t.id&&n.push(e);t.init(n,e[l][0],e[l][1]),l++}}robotState(t){return 2!=it.robots.length?"":it.robots[t].state()}robotName(t){return 2!=it.robots.length?"":it.robots[t].name}completed_request(t,e){e||(this.suspended=!0,this.suspend_battle(t,this.robotState(0),this.robotState(1)))}hit_robot(t,e){it.explosions.push({x:t,y:e,progress:1})}async loop(){for(let t of it.robots)t.update().then((e=>{e||(this.stop(),this.end_battle(0==t.id?1:0))}));if(this.draw(),nt.state(this.duration,this.robotState(0),this.robotState(1)),this.duration--,0==this.duration)return this.end_battle(-1),void this.stop();0==it.explosions.length&&it.robots.length<=1&&(0==it.robots.length?this.end_battle(-1):this.end_battle(it.robots[0].id),this.stop()),this.tracing?this.suspend_battle("Tracing... (suspended)",this.robotState(0),this.robotState(1)):this.suspended||(this.timeout=setTimeout((()=>this.loop()),it.speed))}draw(){let t=[];for(let e of it.robots)e.hp>0&&t.push(e);it.robots=t;for(let t of it.explosions){let t=it.explosions.pop();t.progress<=17&&(t.progress+=1,it.explosions.unshift(t))}}stop(){this.suspended=!0,clearTimeout(this.timeout)}terminate(){this.stop(),this.end_battle(-2)}start(){return this.suspended=!1,this.tracing=!1,this.loop(),this.title}trace(){return this.suspended=!0,this.tracing=!0,this.loop(),this.title}}it.robots=[],it.explosions=[],it.speed=10;const rt=[];function st(e,n=t){let o;const i=[];function s(t){if(r(e,t)&&(e=t,o)){const t=!rt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),rt.push(n,e)}if(t){for(let t=0;t<rt.length;t+=2)rt[t][0](rt[t+1]);rt.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(r,a=t){const l=[r,a];return i.push(l),1===i.length&&(o=n(s)||t),r(e),()=>{const t=i.indexOf(l);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}const at=st([{n:0,req:"",res:"",state:""},{n:0,req:"",res:"",state:""}]),lt=st(""),ut=st(0);class ct{constructor(t){this.assets={},this.loaded=0,this.total=0,this.sources=t}get(t){return this.assets[t]}loadAll(t){for(let t in this.sources)this.assets[t]=new Image,this.assets[t].src=this.sources[t],++this.total;for(let e in this.assets)this.assets[e].onload=()=>{++this.loaded,this.total==this.loaded&&t()}}}let ht=new ct({splash:"img/splash.png",background:"img/background.png",body:"img/body.png","body-red":"img/body-red.png",turret:"img/turret.png","turret-red":"img/turret-red.png","explosion1-1":"img/explosion/explosion1-1.png","explosion1-2":"img/explosion/explosion1-2.png","explosion1-3":"img/explosion/explosion1-3.png","explosion1-4":"img/explosion/explosion1-4.png","explosion1-5":"img/explosion/explosion1-5.png","explosion1-6":"img/explosion/explosion1-6.png","explosion1-7":"img/explosion/explosion1-7.png","explosion1-8":"img/explosion/explosion1-8.png","explosion1-9":"img/explosion/explosion1-9.png","explosion1-10":"img/explosion/explosion1-10.png","explosion1-11":"img/explosion/explosion1-11.png","explosion1-12":"img/explosion/explosion1-12.png","explosion1-13":"img/explosion/explosion1-13.png","explosion1-14":"img/explosion/explosion1-14.png","explosion1-15":"img/explosion/explosion1-15.png","explosion1-16":"img/explosion/explosion1-16.png","explosion1-17":"img/explosion/explosion1-17.png"});function dt(t,e,n,o){at.update((i=>(void 0!==e&&(i[t].n=e),void 0!==n&&(i[t].req=n),void 0!==o&&(i[t].res=o),i)))}class pt extends it{constructor(t,e,n,o){super(t,e,n,o),ht.loadAll((()=>{}))}webinit(t,e,n,o){this.ctx=t,this.init(e,n,-1,o);for(let t of it.robots)t.inspect=dt}draw(){this.ctx.drawImage(ht.get("background"),0,0,this.width,this.height);let t=[];for(let e of it.robots){let n=0==e.id?"body":"body-red",o=0==e.id?"turret":"turret-red";if(e.hp<=0){it.explosions.push({x:e.x,y:e.y,progress:1});continue}t.push(e),this.ctx.save(),this.ctx.translate(e.x,e.y),this.ctx.textAlign="left",this.ctx.textBaseline="top";let i=20,r=20;this.width-e.x<100&&(i=-i,this.ctx.textAlign="right"),this.height-e.y<100&&(r=-r);let s=`${e.hp}/${e.hp_total}`;if(e.is_yell&&e.yell_ts<50?(this.ctx.font="18px Verdana",s=e.yell_msg,e.yell_ts++):(this.ctx.font="14px Courier",e.yell_ts=0,e.is_yell=!1),this.ctx.fillStyle="#FFFFFF",this.ctx.fillText(s,i,r),this.ctx.rotate(Z(e.tank_angle)),this.ctx.drawImage(ht.get(n),-25,-25,50,50),this.ctx.rotate(Z(e.turret_angle)),this.ctx.drawImage(ht.get(o),-25,-12.5,50,25),this.ctx.rotate(Z(e.radar_angle)),this.ctx.restore(),e.bullets.length>0)for(let t of e.bullets)this.ctx.save(),this.ctx.translate(t.x,t.y),this.ctx.rotate(Z(t.direction)),this.ctx.fillStyle="#FFFFFF",this.ctx.fillRect(-3,-3,6,6),this.ctx.restore()}it.robots=t;for(let t of it.explosions){let t=it.explosions.pop();t.progress<=17&&(this.ctx.drawImage(ht.get("explosion1-"+t.progress),t.x-64,t.y-64,128,128),t.progress+=1,it.explosions.unshift(t))}}}function ft(t,e,n){const o=t.slice();return o[55]=e[n],o}function mt(t,e,n){const o=t.slice();return o[60]=e[n],o}function gt(t,e,n){const o=t.slice();return o[55]=e[n],o}function bt(t){let e,n;return{c(){e=h("h1"),n=d(t[3])},m(t,o){l(t,e,o),a(e,n)},p(t,e){8&e[0]&&b(n,t[3])},d(t){t&&u(e)}}}function yt(e){let n,o;return{c(){n=h("img"),w(n,"padding-bottom","20px"),g(n,"alt","banner"),g(n,"width","500"),g(n,"class","center"),n.src!==(o="img/banner.png")&&g(n,"src","img/banner.png")},m(t,e){l(t,n,e)},p:t,d(t){t&&u(n)}}}function wt(t){let e,n,i,r,s,c,y,w,v,x,_,k,E,q,O,A,S,$,C,T,R,M,I,F,j,z,B,P,N,L,D,U,H,J,G,V,Y,W,X,K,Q,Z,tt=t[2].robotName(0)+"",et=t[2].robotName(1)+"";function nt(t,e){return t[10]?_t:xt}let ot=nt(t),it=ot(t),rt=t[6]&&kt(t);return{c(){e=h("div"),n=h("h3"),i=d(t[4]),r=p(),s=h("div"),c=h("h1"),y=h("span"),w=d(tt),v=d(" vs\n          "),x=h("span"),_=d(et),k=p(),E=h("div"),q=h("div"),O=h("br"),A=p(),S=h("button"),it.c(),$=p(),C=h("br"),T=p(),R=h("button"),R.textContent="Stop",M=h("br"),I=p(),F=h("button"),j=d("Edit"),B=p(),P=h("div"),N=h("br"),L=p(),D=h("label"),U=h("input"),H=d("\n            Debug"),J=h("br"),G=p(),V=h("a"),V.textContent="Logs",Y=p(),W=h("br"),X=p(),rt&&rt.c(),K=f(),g(e,"class","row"),g(y,"id","yellow"),g(y,"class","svelte-1fcsikx"),g(x,"id","red"),g(x,"class","svelte-1fcsikx"),g(s,"class","row"),g(S,"id","fight"),g(F,"id","edit"),F.disabled=z=0==t[13].length,g(q,"class","column column-left column-offset"),g(U,"type","checkbox"),g(V,"href","https://apigcp.nimbella.io/wb/?command=activation+list"),g(V,"target","workbench"),g(P,"class","column column-right"),g(E,"class","row")},m(o,u){l(o,e,u),a(e,n),a(n,i),l(o,r,u),l(o,s,u),a(s,c),a(c,y),a(y,w),a(c,v),a(c,x),a(x,_),l(o,k,u),l(o,E,u),a(E,q),a(q,O),a(q,A),a(q,S),it.m(S,null),a(q,$),a(q,C),a(q,T),a(q,R),a(q,M),a(q,I),a(q,F),a(F,j),a(E,B),a(E,P),a(P,N),a(P,L),a(P,D),a(D,U),U.checked=t[6],a(D,H),a(D,J),a(D,G),a(D,V),a(D,Y),a(P,W),l(o,X,u),rt&&rt.m(o,u),l(o,K,u),Q||(Z=[m(S,"click",t[27]),m(R,"click",t[37]),m(F,"click",t[25]),m(U,"change",t[38])],Q=!0)},p(t,e){16&e[0]&&b(i,t[4]),4&e[0]&&tt!==(tt=t[2].robotName(0)+"")&&b(w,tt),4&e[0]&&et!==(et=t[2].robotName(1)+"")&&b(_,et),ot!==(ot=nt(t))&&(it.d(1),it=ot(t),it&&(it.c(),it.m(S,null))),8192&e[0]&&z!==(z=0==t[13].length)&&(F.disabled=z),64&e[0]&&(U.checked=t[6]),t[6]?rt?rt.p(t,e):(rt=kt(t),rt.c(),rt.m(K.parentNode,K)):rt&&(rt.d(1),rt=null)},d(t){t&&u(e),t&&u(r),t&&u(s),t&&u(k),t&&u(E),it.d(),t&&u(X),rt&&rt.d(t),t&&u(K),Q=!1,o(Z)}}}function vt(t){let e,n,i,r,s,b,w,x,_,k,E,q,O,A,S,$,C,R,M,I,F,j,z,B,P,N,L,D,U,H,J,G;function V(t,e){return 0==t[13].length?qt:Et}let Y=V(t),W=Y(t),X=t[18],K=[];for(let e=0;e<X.length;e+=1)K[e]=St(ft(t,X,e));function Q(t,e){return void 0===t[0]?Ct:$t}let Z=Q(t),tt=Z(t);function et(t,e){return void 0===t[0]?Rt:Tt}let nt=et(t),ot=nt(t);return{c(){e=h("div"),e.innerHTML="<h3>Make Your Choice</h3>",n=p(),i=h("div"),r=h("div"),s=h("label"),b=d("Filter Yellow Fighters: "),w=h("input"),x=p(),_=h("label"),_.textContent="Yellow Fighter (You)",k=p(),E=h("select"),W.c(),q=p(),O=h("div"),A=h("label"),S=d("Filter Red Fighters: "),$=h("input"),C=p(),R=h("label"),R.textContent="Red Fighter (Enemy)",M=p(),I=h("select");for(let t=0;t<K.length;t+=1)K[t].c();F=p(),j=h("div"),z=h("div"),tt.c(),B=p(),P=h("div"),N=h("button"),L=d("Start the Battle"),U=p(),ot.c(),H=f(),g(e,"class","row"),g(_,"for","mybot"),g(E,"id","enemy"),void 0===t[8]&&T((()=>t[32].call(E))),g(r,"class","column column-left column-offset"),g(R,"for","enemy"),g(I,"id","enemy"),void 0===t[9]&&T((()=>t[34].call(I))),g(O,"class","column column-right"),g(i,"class","row"),g(z,"class","column column-left column-offset"),g(N,"id","done"),N.disabled=D=!It,g(P,"class","column column-right"),g(j,"class","row")},m(o,u){l(o,e,u),l(o,n,u),l(o,i,u),a(i,r),a(r,s),a(s,b),a(s,w),y(w,t[14]),a(r,x),a(r,_),a(r,k),a(r,E),W.m(E,null),v(E,t[8]),a(i,q),a(i,O),a(O,A),a(A,S),a(A,$),y($,t[15]),a(O,C),a(O,R),a(O,M),a(O,I);for(let t=0;t<K.length;t+=1)K[t].m(I,null);v(I,t[9]),l(o,F,u),l(o,j,u),a(j,z),tt.m(z,null),a(j,B),a(j,P),a(P,N),a(N,L),l(o,U,u),ot.m(o,u),l(o,H,u),J||(G=[m(w,"input",t[31]),m(w,"input",t[23]),m(E,"change",t[32]),m($,"input",t[33]),m($,"input",t[23]),m(I,"change",t[34]),m(N,"click",t[26])],J=!0)},p(t,e){if(16384&e[0]&&w.value!==t[14]&&y(w,t[14]),Y===(Y=V(t))&&W?W.p(t,e):(W.d(1),W=Y(t),W&&(W.c(),W.m(E,null))),196864&e[0]&&v(E,t[8]),32768&e[0]&&$.value!==t[15]&&y($,t[15]),262144&e[0]){let n;for(X=t[18],n=0;n<X.length;n+=1){const o=ft(t,X,n);K[n]?K[n].p(o,e):(K[n]=St(o),K[n].c(),K[n].m(I,null))}for(;n<K.length;n+=1)K[n].d(1);K.length=X.length}262656&e[0]&&v(I,t[9]),Z===(Z=Q(t))&&tt?tt.p(t,e):(tt.d(1),tt=Z(t),tt&&(tt.c(),tt.m(z,null))),nt===(nt=et(t))&&ot?ot.p(t,e):(ot.d(1),ot=nt(t),ot&&(ot.c(),ot.m(H.parentNode,H)))},d(t){t&&u(e),t&&u(n),t&&u(i),W.d(),c(K,t),t&&u(F),t&&u(j),tt.d(),t&&u(U),ot.d(t),t&&u(H),J=!1,o(G)}}}function xt(t){let e;return{c(){e=d("Fight!")},m(t,n){l(t,e,n)},d(t){t&&u(e)}}}function _t(t){let e;return{c(){e=d("Suspend")},m(t,n){l(t,e,n)},d(t){t&&u(e)}}}function kt(t){let e,n,i,r,s,c,f,y,w,v,x,_,k,E,q,O,A,S,$,C,T,R,M,I,F,j,z,B,P,N,L,D,U,H,J,G,V,Y,W,X,K,Q,Z,tt,et,nt,ot,it,rt,st,at,lt,ut=t[20][0].state+"",ct=t[20][0].n+"",ht=t[20][0].req+"",dt=t[20][0].res+"",pt=t[20][1].state+"",ft=t[20][1].n+"",mt=t[20][1].req+"",gt=t[20][1].res+"";return{c(){e=h("div"),n=h("div"),i=h("button"),i.textContent="Trace",r=p(),s=h("div"),c=d("Trace: \n            "),f=h("label"),y=h("input"),w=d("\n              Events "),v=p(),x=h("label"),_=h("input"),k=d("\n              Requests "),E=p(),q=h("label"),O=h("input"),A=d("\n              Actions "),S=d("\n            (open console)"),$=p(),C=h("div"),T=h("div"),R=h("b"),M=d("[Me] "),I=d(ut),F=h("br"),j=d("\n            Request/"),z=h("b"),z.textContent="Response",B=d("\n            #"),P=d(ct),N=p(),L=h("pre"),D=d(ht),U=h("br"),H=h("b"),J=d(dt),G=p(),V=h("b"),Y=d("[Emeny] "),W=d(pt),X=h("br"),K=d("\n            Request/"),Q=h("b"),Q.textContent="Response",Z=d("\n            #"),tt=d(ft),et=p(),nt=h("pre"),ot=d(mt),it=h("br"),rt=h("b"),st=d(gt),g(i,"id","step"),g(n,"class","column column-left column-offset"),g(y,"type","checkbox"),g(_,"type","checkbox"),g(O,"type","checkbox"),g(s,"class","column column-right"),g(e,"class","row"),g(T,"class","column column-50 column-offset"),g(C,"class","row")},m(o,u){l(o,e,u),a(e,n),a(n,i),a(e,r),a(e,s),a(s,c),a(s,f),a(f,y),y.checked=t[1].eventOn,a(f,w),a(s,v),a(s,x),a(x,_),_.checked=t[1].requestOn,a(x,k),a(s,E),a(s,q),a(q,O),O.checked=t[1].actionOn,a(q,A),a(s,S),l(o,$,u),l(o,C,u),a(C,T),a(T,R),a(R,M),a(R,I),a(T,F),a(T,j),a(T,z),a(T,B),a(T,P),a(T,N),a(T,L),a(L,D),a(L,U),a(L,H),a(H,J),a(T,G),a(T,V),a(V,Y),a(V,W),a(T,X),a(T,K),a(T,Q),a(T,Z),a(T,tt),a(T,et),a(T,nt),a(nt,ot),a(nt,it),a(nt,rt),a(rt,st),at||(lt=[m(i,"click",t[24]),m(y,"change",t[39]),m(_,"change",t[40]),m(O,"change",t[41])],at=!0)},p(t,e){2&e[0]&&(y.checked=t[1].eventOn),2&e[0]&&(_.checked=t[1].requestOn),2&e[0]&&(O.checked=t[1].actionOn),1048576&e[0]&&ut!==(ut=t[20][0].state+"")&&b(I,ut),1048576&e[0]&&ct!==(ct=t[20][0].n+"")&&b(P,ct),1048576&e[0]&&ht!==(ht=t[20][0].req+"")&&b(D,ht),1048576&e[0]&&dt!==(dt=t[20][0].res+"")&&b(J,dt),1048576&e[0]&&pt!==(pt=t[20][1].state+"")&&b(W,pt),1048576&e[0]&&ft!==(ft=t[20][1].n+"")&&b(tt,ft),1048576&e[0]&&mt!==(mt=t[20][1].req+"")&&b(ot,mt),1048576&e[0]&&gt!==(gt=t[20][1].res+"")&&b(st,gt)},d(t){t&&u(e),t&&u($),t&&u(C),at=!1,o(lt)}}}function Et(t){let e,n=t[17],o=[];for(let e=0;e<n.length;e+=1)o[e]=Ot(mt(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=f()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);l(t,e,n)},p(t,i){if(655360&i[0]){let r;for(n=t[17],r=0;r<n.length;r+=1){const s=mt(t,n,r);o[r]?o[r].p(s,i):(o[r]=Ot(s),o[r].c(),o[r].m(e.parentNode,e))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(t){c(o,t),t&&u(e)}}}function qt(t){let e,n=t[16],o=[];for(let e=0;e<n.length;e+=1)o[e]=At(gt(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=f()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);l(t,e,n)},p(t,i){if(65536&i[0]){let r;for(n=t[16],r=0;r<n.length;r+=1){const s=gt(t,n,r);o[r]?o[r].p(s,i):(o[r]=At(s),o[r].c(),o[r].m(e.parentNode,e))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(t){c(o,t),t&&u(e)}}}function Ot(t){let e,n,o,i,r=t[60].split(".")[0]+"",s=t[19]>0?" (+"+t[19]+")":"";return{c(){e=h("option"),n=d(r),o=d(s),e.__value=i=t[60],e.value=e.__value},m(t,i){l(t,e,i),a(e,n),a(e,o)},p(t,a){131072&a[0]&&r!==(r=t[60].split(".")[0]+"")&&b(n,r),524288&a[0]&&s!==(s=t[19]>0?" (+"+t[19]+")":"")&&b(o,s),131072&a[0]&&i!==(i=t[60])&&(e.__value=i,e.value=e.__value)},d(t){t&&u(e)}}}function At(t){let e,n,o,i=t[55].name+"";return{c(){e=h("option"),n=d(i),e.__value=o=t[55].url,e.value=e.__value},m(t,o){l(t,e,o),a(e,n)},p(t,r){65536&r[0]&&i!==(i=t[55].name+"")&&b(n,i),65536&r[0]&&o!==(o=t[55].url)&&(e.__value=o,e.value=e.__value)},d(t){t&&u(e)}}}function St(t){let e,n,o,i=t[55].name+"";return{c(){e=h("option"),n=d(i),e.__value=o=t[55].url,e.value=e.__value},m(t,o){l(t,e,o),a(e,n)},p(t,r){262144&r[0]&&i!==(i=t[55].name+"")&&b(n,i),262144&r[0]&&o!==(o=t[55].url)&&(e.__value=o,e.value=e.__value)},d(t){t&&u(e)}}}function $t(t){let e,n,o,i,r,s;return{c(){e=h("div"),n=h("button"),o=d("Edit my Fighter"),g(n,"id","edit"),n.disabled=i=0==t[13].length,g(e,"class","column column-right")},m(i,u){l(i,e,u),a(e,n),a(n,o),r||(s=m(n,"click",t[25]),r=!0)},p(t,e){8192&e[0]&&i!==(i=0==t[13].length)&&(n.disabled=i)},d(t){t&&u(e),r=!1,s()}}}function Ct(e){let n,o,i;return{c(){n=h("button"),n.textContent="Login",g(n,"id","login")},m(t,r){l(t,n,r),o||(i=m(n,"click",e[21]),o=!0)},p:t,d(t){t&&u(n),o=!1,i()}}}function Tt(t){let e,n,i,r,s,c,f,w,x,_,k,E,q,O,A,S,$,C,R,M;return{c(){e=h("div"),n=h("div"),i=h("button"),i.textContent="Create New Fighter",r=p(),s=h("div"),c=h("input"),f=p(),w=h("div"),x=h("div"),x.textContent="Programming Language:",_=p(),k=h("div"),E=h("select"),q=h("option"),q.textContent="JavaScript",O=h("option"),O.textContent="Python",A=h("option"),A.textContent="Golang",S=p(),$=h("h4"),C=d(t[7]),g(i,"id","create"),g(n,"class","column column-left column-offset"),g(c,"type","text"),g(c,"placeholder","robot name"),g(c,"id","botname"),g(s,"class","column column-right"),g(e,"class","row"),g(x,"class","column column-left column-offset"),q.__value="js",q.value=q.__value,O.__value="py",O.value=O.__value,A.__value="go",A.value=A.__value,void 0===t[12]&&T((()=>t[36].call(E))),g(k,"class","column column-right"),g(w,"class","row")},m(o,u){l(o,e,u),a(e,n),a(n,i),a(e,r),a(e,s),a(s,c),y(c,t[11]),l(o,f,u),l(o,w,u),a(w,x),a(w,_),a(w,k),a(k,E),a(E,q),a(E,O),a(E,A),v(E,t[12]),l(o,S,u),l(o,$,u),a($,C),R||(M=[m(i,"click",t[22]),m(c,"input",t[35]),m(E,"change",t[36])],R=!0)},p(t,e){2048&e[0]&&c.value!==t[11]&&y(c,t[11]),4096&e[0]&&v(E,t[12]),128&e[0]&&b(C,t[7])},d(t){t&&u(e),t&&u(f),t&&u(w),t&&u(S),t&&u($),R=!1,o(M)}}}function Rt(e){let n,o,i,r,s,c,p,f,m,b,y,w,v;return{c(){n=h("div"),o=h("div"),i=h("h4"),r=d("Welcome to\n              "),s=h("b"),s.textContent="FAAS Wars",c=d("\n              v"),p=d("1.3"),f=d("."),m=h("br"),b=d("Please check the\n              "),y=h("a"),y.textContent="License",w=d("."),v=h("br"),g(y,"href","license.html"),g(o,"class","column column-center column-offset"),g(n,"class","row")},m(t,e){l(t,n,e),a(n,o),a(o,i),a(i,r),a(i,s),a(i,c),a(i,p),a(i,f),a(i,m),a(i,b),a(i,y),a(i,w),a(i,v)},p:t,d(t){t&&u(n)}}}function Mt(e){let n,o,i,r,s,c;function d(t,e){return""==t[3]?yt:bt}let f=d(e),m=f(e);function b(t,e){return t[5]?wt:vt}let y=b(e),w=y(e);return{c(){n=h("main"),o=h("section"),i=h("div"),m.c(),r=p(),s=h("div"),s.innerHTML='<canvas id="arena" width="500" height="500" class="svelte-1fcsikx"></canvas>',c=p(),w.c(),g(i,"class","row"),g(s,"class","row"),g(o,"class","container"),g(n,"class","wrapper")},m(t,e){l(t,n,e),a(n,o),a(o,i),m.m(i,null),a(o,r),a(o,s),a(o,c),w.m(o,null)},p(t,e){f===(f=d(t))&&m?m.p(t,e):(m.d(1),m=f(t),m&&(m.c(),m.m(i,null))),y===(y=b(t))&&w?w.p(t,e):(w.d(1),w=y(t),w&&(w.c(),w.m(o,null)))},i:t,o:t,d(t){t&&u(n),m.d(),w.d()}}}let It=!0,Ft=/^\w{1,60}$/g;function jt(t,e,n){let o,i;s(t,ut,(t=>n(19,o=t))),s(t,at,(t=>n(20,i=t)));var r=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))};let a,l,u,{base:c}=e,{apihost:h}=e,{namespace:d}=e,{ow:p}=e,f=void 0===p?"":"Choose opponents",m="Select Opponents",g=!1,b=!1,y="",w=!1,v=!1,_="",k="js",q=[],O=[],A=O,S=O,$="",C="",T=A,R=q,M=S,I={js:c+"/src/JsBot.js",go:c+"/src/GoBot.go",py:c+"/src/PyBot.py"};function F(){return r(this,void 0,void 0,(function*(){O=yield async function(){return X("https://apigcp.nimbella.io/api/v1/web/nimbots/rumble/public").then((t=>t.json())).catch((t=>[]))}();for(let t=0;t<O.length;t++){let e=O[t];O[t].url=e.url+":"+e.rewards,O[t].name=e.name+(e.rewards>0?" (+"+e.rewards+")":"")}A=Object.assign([],O),A.sort((()=>.5-Math.random())),S=Object.assign([],O),S.sort((()=>.5-Math.random())),void 0!==p&&n(13,q=yield p.list()),j()}))}function j(){n(16,T=A.filter((t=>-1!==t.name.toLowerCase().indexOf($.toLowerCase())))),n(17,R=q.filter((t=>-1!==t.toLowerCase().indexOf($.toLowerCase())))),n(18,M=S.filter((t=>-1!==t.name.toLowerCase().indexOf(C.toLowerCase())))),q.length>0?n(8,l=R[0]):n(8,l=T[0].url),n(9,u=M[0].url),console.log("updated",l,u)}let z=lt.subscribe((t=>{v=""!=t,F()}));function B(t){n(3,f="Game over"),-2==t?(N="ready",n(7,y="")):-1==t?(N="draw",n(7,y="")):0==t?(N="won",n(7,y="Great Achievement! Share it with your friends!")):(N="lose",n(7,y="")),n(4,m="Select Opponents"),n(5,g=!1),n(10,w=!1),a.stop(),at.set([{n:0,req:"",res:"",state:""},{n:0,req:"",res:"",state:""}])}function P(t,e,o){n(4,m=t),n(10,w=!1),at.update((t=>(t[0].state=e,t[1].state=o,t)))}let N=void 0===p?"splash":"ready",L=new ct({splash:"img/splash.png",ready:"img/ready.png",lose:"img/lose.png",won:"img/won.png",draw:"img/draw.png"});function D(){let t=document.getElementById("arena").getContext("2d");t.clearRect(0,0,500,500),t.drawImage(L.get(N),0,0)}!function(t){E().$$.after_update.push(t)}((()=>{v||g||D()})),function(t){E().$$.on_mount.push(t)}((()=>{let t=document.getElementById("arena");n(2,a=new pt(parseInt(t.getAttribute("width")),parseInt(t.getAttribute("height")),B,P)),F(),L.loadAll((()=>D()))})),function(t){E().$$.on_destroy.push(t)}(z);return t.$$set=t=>{"base"in t&&n(28,c=t.base),"apihost"in t&&n(29,h=t.apihost),"namespace"in t&&n(30,d=t.namespace),"ow"in t&&n(0,p=t.ow)},[p,nt,a,f,m,g,b,y,l,u,w,_,k,q,$,C,T,R,M,o,i,function(){X(c+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:prompt("Password:")})}).then((t=>t.json())).then((t=>{console.log(t),"error"in t?alert(t.error):"token"in t&&(n(0,p=new K(h,t.token,d)),window.ow=p)})).catch((t=>{console.log(t),alert("Unexpected error - check logs")}))},function(){return r(this,void 0,void 0,(function*(){if(!_.match(Ft))return alert("Invalid Robot Name"),!1;let t;return X(I[k]).then((t=>{if(t.ok)return t.text();throw t.statusText})).then((e=>(t=_+"."+k,p.save(t,e,!1)))).then((e=>r(this,void 0,void 0,(function*(){if(console.log(e),"error"in e)throw e.error;return lt.set(t),!0})))).catch((t=>(alert(t),!1)))}))},j,function(){n(4,m="Tracing..."),n(10,w=!1),n(3,f=a.trace())},function(){console.log(l),lt.set(l),a.stop(),v=!0},function(){console.log("mybot",l),console.log("enemybot",u);let t=0==q.length?l.split(":")[0]:p.namespace+"/default/"+l.split(".")[0],e=0==q.length?parseInt(l.split(":")[1]):o,i=u.split(":")[0],r=parseInt(u.split(":")[1]),s=[Q+t,Q+i],c=document.getElementById("arena"),h=[[360*Math.random(),360*Math.random()],[360*Math.random(),360*Math.random()]],d=[e,r];a.webinit(c.getContext("2d"),s,h,d),n(5,g=!0),n(3,f="May the FAAS be with you!"),n(4,m="Fighting!"),n(10,w=!0),a.draw(),a.start()},function(){n(10,w=!w),w?(n(4,m="Fighting!"),a.start()):(n(4,m="Suspended..."),a.stop())},c,h,d,function(){$=this.value,n(14,$)},function(){l=x(this),n(8,l),n(16,T),n(17,R)},function(){C=this.value,n(15,C)},function(){u=x(this),n(9,u),n(18,M)},function(){_=this.value,n(11,_)},function(){k=x(this),n(12,k)},()=>{n(5,g=!1),n(10,w=!1),a.terminate()},function(){b=this.checked,n(6,b)},function(){nt.eventOn=this.checked,n(1,nt)},function(){nt.requestOn=this.checked,n(1,nt)},function(){nt.actionOn=this.checked,n(1,nt)}]}class zt extends J{constructor(t){super(),H(this,t,jt,Mt,r,{base:28,apihost:29,namespace:30,ow:0},[-1,-1,-1])}}function Bt(e){let n;return{c(){n=h("div"),g(n,"class","column column-center column-offset")},m(t,e){l(t,n,e),n.innerHTML='\n<h1 id="how-to-code-your-fighter">How to code your fighter</h1>\n<p>This document is a quick recap of the API. You can also <a href="https://nimbella.com/blog/faas-wars-serverless-virtual-robot-competition?utm_source=subdomain&amp;utm_medium=landing&amp;utm_campaign=faaswars">read this tutorial</a>.</p>\n<p>You control your fighter writing a serverless action. <a href="https://github.com/openwhisk-blog/nimbots/tree/master/packages/default">Check here the source code of the sample fighters</a>. You can use the integrated editor to code your fighter but you need to setup an account in Nimbella to play.</p>\n<p>A serverless action is a function, written in either Javascript, Python or Go, that receive as input a json document and returns its answer in json. In each programming language the json is serialized and deserialized first in a data structure appropriate for you programming language. When you create a fighter a suitable example is provided.</p>\n<p>Each fighter will communicate with the action to receive orders. The action is invoked when an event occurr. In response to an event you return a list of orders, in the format described below.</p>\n<p>The fighter has an energy level that starts at 5 and decrease by one each time you are hit. When it reaches <code>0</code> you lose. You lose also if your controlling actions returns an error, so be careful in your coding.</p>\n<h2 id="events">Events</h2>\n<p>The fighter receive a message in the following format:</p>\n<pre><code>{\n  &quot;event&quot;: &quot;idle&quot;,\n  &quot;energy&quot;: 5,\n  &quot;x&quot;: 110,\n  &quot;y&quot;: 240,\n  &quot;angle&quot;: 23\n  &quot;tank_angle&quot;: 232,\n  &quot;turret_angle&quot;: 150,\n  &quot;enemy_spot&quot;: {},\n  &quot;data&quot;: {}\n}</code></pre>\n<ul>\n<li>The <code>event</code> can be:\n<ul>\n<li><code>idle</code>: the fighter has its order queue empty and and asks for new orders</li>\n<li><code>enemy-spot</code>: the fighter has spotted the enemy and can hit him firing</li>\n<li><code>hit</code>: the fighter was hit by an enemy bullet</li>\n<li><code>wall-collide</code>: the fighter collided with a wall</li>\n</ul></li>\n<li><code>x</code> and <code>y</code> are the position in the battlefiel,</li>\n<li><code>tank_angle</code> and <code>turret_angle</code> are the angles of the tank and of the turret in degrees.</li>\n<li><code>angle</code> is the sum of the angle of the turret and the tank, modulo 360</li>\n<li><code>energy</code> is your energy level,</li>\n</ul>\n<p>When the event is <code>enemy_spot</code> there is also the field <code>enemy_spot</code> in this format:</p>\n<pre><code>{\n    &quot;id&quot;: 1,\n    &quot;x&quot;: 291,\n    &quot;y&quot;: 180,\n    &quot;angle&quot;: 23,\n    &quot;distance&quot;: 202,\n    &quot;energy&quot;: 1\n}</code></pre>\n<p>where <code>x</code> and <code>y</code> are the enemy location, <code>angle</code> is the absolute angle to fire him, <code>distance</code> is its distance and <code>energy</code> the enemy energy level.</p>\n<p>Lastly the <code>data</code> field is a field that you can set with your own values with the <code>data</code> command, to save a state for further actions.</p>\n<h2 id="commands">Commands</h2>\n<p>When you receive an event you decide what to do and give orders to the fighter.</p>\n<p>The commands are an array of maps. For example:</p>\n<pre><code>[{\n    &quot;move_forwards&quot;: 50,\n    &quot;shoot&quot;: true\n },\n {\n  &quot;move_backwards&quot;: 50,\n  &quot;turn_turret_right&quot;: 180,\n  &quot;shoot&quot;: true\n}]</code></pre>\n<p>Each map must contains one (and only one) key/value entry describing a sequential action. If you specify more than one sequential action, only one will be executed (and we do not tell you which one, so do not do it!).</p>\n<p>The sequential actions are:</p>\n<ul>\n<li><code>move_forwads: &lt;number&gt;</code>: move forward of the given number of pixels</li>\n<li><code>move_backwards: &lt;number&gt;</code>: move backwards of the given number of pixels</li>\n<li><code>move_opposide: &lt;number&gt;</code>: move in the opposite direction of where you were moving - useful when you hit a wall</li>\n<li><code>turn_left: &lt;number&gt;</code>: turn the tanks to the left of the given angle in degrees</li>\n<li><code>turn_right: &lt;number&gt;</code>: turn the tanks to the right of the given angle in degrees</li>\n</ul>\n<p>For each sequential action you can also specify a parallel action, that is done at the same time as the sequential (that is: the tank can fire and move the turret while it is moving in a given direction)</p>\n<p>The parallel actions are:</p>\n<ul>\n<li><code>turn_turret_left: &lt;number&gt;</code>: turn the turret to the left of the given angle in degrees</li>\n<li><code>turn_turret_right: &lt;number&gt;</code>: turn the turret to the right of the given angle in degrees</li>\n<li><code>shot: true</code>: fires a bullet; note you can fire up to 5 bullets at the same time</li>\n<li><code>yell: &lt;string&gt;</code>: yell a message that will be displayed in the battle field</li>\n</ul>\n'},p:t,i:t,o:t,d(t){t&&u(n)}}}class Pt extends J{constructor(t){super(),H(this,t,null,Bt,r,{})}}function Nt(t){let e,n,i,r,s,c,f,y,v,x,_,k,E,q,O,A,S,$,C,T,R,M,I,F,j,z;return I=new Pt({}),{c(){e=h("main"),n=h("section"),i=h("div"),r=h("iframe"),c=p(),f=h("br"),y=p(),v=h("div"),x=h("div"),_=h("button"),_.textContent="Save",k=d("\n         \n        "),E=h("button"),E.textContent="Cancel",q=d("\n         \n        "),O=h("button"),O.textContent="Delete",A=p(),S=h("div"),$=h("h3"),C=h("tt"),T=d(t[0]),R=p(),M=h("div"),N(I.$$.fragment),g(r,"title","editor"),g(r,"id","editor"),r.src!==(s="editor.html")&&g(r,"src","editor.html"),w(r,"height","500px"),w(r,"width","100%"),g(r,"frameborder","0"),g(r,"scrolling","no"),g(i,"class","row"),g(_,"id","done"),g(E,"id","done"),g(O,"id","done"),g(x,"class","float-left"),g(S,"class","float-right"),g(v,"class","clearfix"),g(M,"class","row"),g(n,"class","container"),g(e,"class","wrapper")},m(o,s){l(o,e,s),a(e,n),a(n,i),a(i,r),a(n,c),a(n,f),a(n,y),a(n,v),a(v,x),a(x,_),a(x,k),a(x,E),a(x,q),a(x,O),a(v,A),a(v,S),a(S,$),a($,C),a(C,T),a(n,R),a(n,M),L(I,M,null),F=!0,j||(z=[m(r,"load",t[1]),m(_,"click",t[4]),m(E,"click",t[2]),m(O,"click",t[3])],j=!0)},p(t,[e]){(!F||1&e)&&b(T,t[0])},i(t){F||(B(I.$$.fragment,t),F=!0)},o(t){P(I.$$.fragment,t),F=!1},d(t){t&&u(e),D(I),j=!1,o(z)}}}function Lt(t,e,n){let o;s(t,lt,(t=>n(0,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))};let r,{ow:a}=e;return t.$$set=t=>{"ow"in t&&n(5,a=t.ow)},[o,function(){return i(this,void 0,void 0,(function*(){r=window.frames[0];let t=o,e=yield a.load(t);r.setValue(t,e)}))},function(){confirm("Are you sure you want to lose your changes?")&&(r.setValue("",""),lt.set(""))},function(){return i(this,void 0,void 0,(function*(){let t=o;t=t.split(".")[0];a.namespace.split("-")[0];confirm("Are you sure you want to delete this Robot?")&&a.del(o).then((()=>{r.setValue("",""),lt.set("")}))}))},function(){return i(this,void 0,void 0,(function*(){let t=o;t=o.split(".")[0];let e=a.namespace;e=e.split("-")[0];let n=yield r.getValue();a.save(o,n,!0).then((()=>{lt.set("")})),yield function(t,e){let n={key:t,value:e};return X("https://apigcp.nimbella.io/api/v1/web/nuvolaris/rumble/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((t=>t.text())).then((t=>t))}(`${a.namespace}:${o}`,n)}))},a]}class Dt extends J{constructor(t){super(),H(this,t,Lt,Nt,r,{ow:5})}}function Ut(e){let n,o,i;return n=new Dt({props:{ow:e[1]}}),{c(){N(n.$$.fragment),o=d("`")},m(t,e){L(n,t,e),l(t,o,e),i=!0},p:t,i(t){i||(B(n.$$.fragment,t),i=!0)},o(t){P(n.$$.fragment,t),i=!1},d(t){D(n,t),t&&u(o)}}}function Ht(e){let n,o;return n=new zt({props:{base:e[3],namespace:e[2],apihost:e[4],ow:e[1]}}),{c(){N(n.$$.fragment)},m(t,e){L(n,t,e),o=!0},p:t,i(t){o||(B(n.$$.fragment,t),o=!0)},o(t){P(n.$$.fragment,t),o=!1},d(t){D(n,t)}}}function Jt(t){let e,n,i,r;const s=[Ht,Ut],a=[];function c(t,e){return""==t[0]?0:1}return e=c(t),n=a[e]=s[e](t),{c(){n.c(),i=f()},m(t,n){a[e].m(t,n),l(t,i,n),r=!0},p(t,[r]){let l=e;e=c(t),e===l?a[e].p(t,r):(z={r:0,c:[],p:z},P(a[l],1,1,(()=>{a[l]=null})),z.r||o(z.c),z=z.p,n=a[e],n?n.p(t,r):(n=a[e]=s[e](t),n.c()),B(n,1),n.m(i.parentNode,i))},i(t){r||(B(n),r=!0)},o(t){P(n),r=!1},d(t){a[e].d(t),t&&u(i)}}}function Gt(t,e,n){let o,i;s(t,lt,(t=>n(0,o=t)));let r=new URL(location.href),a=r.pathname.split("/"),l=a[a.length-4];r.pathname=a.slice(0,-1).join("/"),"localhost:5000"==location.host&&(r.port="3233");let u=r.href;r.pathname="";let c=r.href.slice(0,-1);return[o,i,l,u,c]}return new class extends J{constructor(t){super(),H(this,t,Gt,Jt,r,{})}}({target:document.body})}();
//# sourceMappingURL=main.js.map
